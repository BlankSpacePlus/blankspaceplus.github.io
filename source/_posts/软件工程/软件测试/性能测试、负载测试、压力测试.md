---
title: 性能测试、负载测试、压力测试
date: 2021-03-22 00:58:31
summary: 本文分享性能测试、负载测试、压力测试的概念，它们都属于系统测试的范畴。
mathjax: true
tags:
- 软件测试
- 软件工程
categories:
- 软件工程
---

# 性能测试

性能测试是以详细的性能需求为指导对系统的性能进行评估的测试活动。

性能测试是在一定的条件下判定应用运行时的“行为”和支持运行的基本环境。

性能测试是用来量度几种系统的特点，比如处理速度、响应时间、资源消耗、吞吐量和效率。

常用性能指标：时间效率，空间效率，I/O性能，数据库性能，内存性能，初始化⁄退出时间和资源
利用率等。

最常见的三个类型的软件性能测试包括：
- 测试由我们想量度的指标驱动。
- 测试基于的资源或负载的类型。
- 测试对系统施加压力或找到它的极限。

负载变化/反弹测试：变化负载量度性能，反应真正负载周期性衰退和反复的典型模型。

校准测试：检验系统是不是违反了强制的需求，例如政府的政策法规。

死锁测试：进行容量测试检验系统是否有资源竞争，例如多个请求访问同一数据库，导致系统停止处理用户请求，由于数据库记录发生死锁。

# 负载测试

负载测试是通过测试应用程序在负载作用下的表现，通过增加工作量直到承受的极限包括它的极限（不只是在它的限制）。

负载测试用于发现已发现设计上的错误或者验证系统的负载能力。

负载测试具体是指负载的大小(并发用户的数量）和相关的值。

负载测试是模拟实际软件系统所承受的负载条件的系统负荷，通过不断加载（不断增加模拟用户数量）或其他加载方式来观察不同负载下系统响应时间和数据吞吐量，系统资源占有率（CPU和内存）等性能指标，以检验系统的行为和特性，发现系统可能存在的性能瓶颈、内存泄露和不能实现同步等问题。

负载测试的加载方式：
- 一次性加载：一次性加载某个数量的用户，在预定的时间段内持续运行。例如，早上上班的时间访问网站或登陆网站的时间非常集中，基本属于扁平负载模式。
- 增加负载：有规律的逐渐增加用户，每秒增加一些新用户，交错上升。借助这种负载方式的测试，容易发现性能的拐点，即性能瓶颈。
- 高突变载荷和低突变载荷：某个时间用户数量很大，突然降到很低，过一段时间，又突然加到很高，反复几次。借助这种负载方式的测试，容易发现资源的释放和内存泄漏的问题。
- 随机加载方法：由随机算法自动生成某个数量范围内变化的、动态的负载，这种方式可能是和实际情况最为接近的一种负载方式。虽然不容易模拟系统运行出现的瞬间高峰期，但可以模拟系统长时间的运行过程的状态。

# 压力测试

压力测试用于判定应用处理大量数据的能力。

压力测试可以成功的测试服务器满负载的情况。

除了在服务器上增加运行的应用结合客户端测试是一种额外的形式的压力测试。

压力测试的两种类型；
- 高负荷长时间(如24小时以上)的稳定性压力测试。
- 极限负载情况导致系统崩溃破坏压力测试。

微软测试实践经验表明，如果软件产品通过72小时压力测试，则在72小时后出现问题的可能性微乎其微。
所以，72小时成为微软产品压力测试的时间标志。

# 测试术语及缩略词

- 测试时间：一轮测试从开始到结束所使用的时间。
- 并发线程数：测试时同时访问被测系统的线程数。注意，由于测试过程中，每个线程都是以尽可能快的速度发请求，与实际用户的使用有极大差别。因此，此数据不等同于实际使用时的并发用户数。
- 每次时间间隔：测试线程发出一个请求，并得到被测系统的响应后，间隔多少时间发出下一次请求。
- 平均响应时间：测试线程向被测系统发请求，所有请求的响应时间的平均值。
- 处理能力：在某一特定环境下，系统处理请求的速度。
- Cache影响系数：测试数据未必如实际使用时分散，Cache在测试过程中会比实际使用时发挥更大作用，从而使测试出的最高处理能力偏高。考虑到这个因素，引入此系数。
- 用户习惯操作频率：根据用户使用习惯估算得到。单个用户在一段时间内，使用此类功能的次数。通常以一天内某段固定的高峰使用时间来统计，如果一天内没有哪段时间是固定的高峰使用时间，则以一天的工作时间来统计。
- 预期平均响应时间：由用户提出的，希望系统在多长时间内响应。注意，这个值并不是某一次访问的时间，而是一段时间多次访问后的平均值。
- 最大并发用户数：在给定的预期平均响应时间下，系统最多能支持多少个并发用户。这个数据就是实际可以同时使用系统的用户数。

# 测试指标计算公式

- $成功率=成功次数÷(成功次数＋失败次数)$
- $处理能力=成功次数÷测试时间$
- $最短平均响应时间=MIN(平均响应时间)$
- $最高处理能力=MAX(处理能力)×(1-Cache影响系数)$
- $最大并发用户数=(最高处理能力-1÷(预期平均响应时间-最短平均响应时间+(1÷最高处理能力)))÷用户习惯操作频率$  （此公式要注意各时间单位的不同和转换）
