---
title: 遗留代码的有效利用
date: 2023-02-15 03:32:23
summary: 本文探讨居家办公对软件生产效率的影响，基于学术论文How does working from home affect developer productivity? — A case study of Baidu during the COVID-19 pandemic。
tags:
- 软件工程
categories:
- 软件工程
---

# 遗留代码

遗留代码是从其他人那里继承或从软件的旧版本继承的源代码。它也可以是当前开发者不理解且难以更改的任何代码。

使用较旧或不熟悉的代码的最大挑战可能是开发者对遗留代码的假设。开发者可能认为代码很糟糕，认为写代码的人不知道他们在做什么，认为自己本可以做得更好。但事实是，代码之所以如此，通常是有原因的。而且，因为代码不是开发者自己写的，他可能无法知道那个原因。

因此，在改进代码库时，开发者需要格外小心谨慎。开发者不能只在一块区域快速修复代码，因为可能有一些不知道的依赖项，导致遇到奇怪的错误。

遗留代码通常是高质量代码和低质量代码的混合体，这意味着软件质量也参差不齐。更重要的是，提高遗留代码的质量通常是一项耗时的任务。因此遵循这些最佳实践来改进遗留代码并因此改进软件质量很重要。

# 利用遗留代码的8个技巧

1. 测试代码：理解代码的一种方法是创建特征测试和单元测试。开发者还可以在代码上使用代码质量工具（例如静态代码分析器）来识别潜在问题。这将帮助开发者了解代码的实际作用，揭示任何潜在的问题区域。了解代码后，您可以更有信心地进行更改。推荐阅读：[软件测试](https://blankspace.blog.csdn.net/category_9747018.html)
2. 查阅文档：查看原始需求的文档将帮助开发者了解代码的来源，有助于更好地改进代码而不会损害系统。如果没有这些信息，开发者可能会不小心引入不良的更改。
3. 只在必要时重写代码：重写继承的代码库可能很诱人，但重写所有内容需要太多时间和太多人力，还容易引入新的错误或者误删隐藏的功能。
4. 尝试重构：推荐开发者尝试循序渐进地重构遗留代码而不是重写它们。重构是在不改变代码功能的情况下改变代码结构的过程，会清理代码并使其更易于理解，还会消除潜在的错误。重构代码的最佳实践：
    - 重构具有单元测试的代码，这样开发者就知道自己拥有什么。
    - 从代码的最深处开始重构，因为这将是最容易重构的地方。
    - 重构后测试，以确保开发者没有破坏任何东西。
    - 保证重构进度可回退，这样开发者就可以恢复到以前的构建结果。
5. 在不同的审查周期中进行更改：不要一次做太多的变更，重构也应该避免与功能更改发生在相同的审查周期中。这使得代码审查变得更容易。对于审阅者来说，多次的少量更改比少次的大量更改更明确。
6. 与其他开发人员合作：开发者可能不太了解接手的代码库，但是他的一些开发同事可能会了解。向最了解代码库的人提问要比自己钻研快得多。在别人的帮助下重新审视代码，可能会帮助开发者更好地理解代码。
7. 保持新代码整洁：按照最佳实践编写的整洁代码可以避免代码出现更多问题。开发者无法控制继承代码的质量，但可以确保自己添加的代码是整洁的。
8. 做进一步的研究：随着时间的推移，开发者使用继承来的代码库会变得更得心应手。初级开发人员可能不理解为什么代码库没有被重构，并且可能热衷于重构代码库。但是高级开发人员会知道什么时候忽略它。了解有关代码库的更多信息可以帮助开发者更好地改进它。
