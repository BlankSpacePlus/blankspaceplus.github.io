---
title: 抽象泄露
date: 2021-03-25 23:12:19
summary: 本文分享软件工程的抽象和抽象泄露。
tags:
- 软件工程
categories:
- 软件工程
---

# 抽象

抽象是从众多的事物中抽取出共同的、本质性的特征，而舍弃其非本质的特征的过程。具体地说，抽象就是人们在实践的基础上，对于丰富的感性材料通过去粗取精、去伪存真、由此及彼、由表及里的加工制作，形成概念、判断、推理等思维形式，以反映事物的本质和规律的方法。

## 抽象是对象模型的主要要素

推荐阅读：[对象模型的七要素](https://blankspace.blog.csdn.net/article/details/114676740)

> 抽象是人类处理复杂性的基本方式。

> 抽象描述了一个对象的基本特征，可以将这个对象与所有其他类型的对象区分开来，因此提供了清晰定义的概念边界，它与观察者的视角有关。

抽象关注一个对象的外部视图，所以可以用来分离对象的基本行为和它的实现。

对于给定的问题域决定一组正确的抽象，就是面向对象设计的核心问题。

> 从那些准确地为问题域实体建模的对象到那些实际上没有什么理由存在的对象，存在着一系列的抽象：
> - 实体抽象：一个对象，代表了问题域或解决方案域实体的一个有用的模型。
> - 动作抽象：一个对象，提供了一组通用的动作，所有的这些操作都执行同类的功能。
> - 虚拟机抽象：一个对象，集中了某种高层控制所用到的所有操作或者这些操作将利用某种更底层的操作集。
> - 偶然抽象：一个对象，封装了一组互相间没有关系的操作。

抽象思想的核心是不变性的概念。
不变量是某种布尔条件，它的值必须保持不变。
对于对象的每个操作，我们可以定义“前置条件”（操作假定的不变量）和“后置条件”（操作满足的不变量），违反一个不变量将会破坏一个抽象相关的契约。
如果违反了前置条件，则说明客户没有完成属于它的那部分责任，因此服务器不能可靠地执行；如果违反了后置条件，则说明服务器没有完成属于它的那部分责任，因此客户不能再信任服务器的行为。
出现异常表示某个不变量没有满足或者不能满足。某些语言允许抛出异常，这样就可以终止处理并向其他对象报告问题，然后这些对象就可以捕捉异常并解决问题。

所有的抽象都有静态和动态属性。

没有对象是孤立的，每个对象都与其他对象协作，实现某些行为。这些对象如何协作的设计决策，定义了某种抽象的边界，从而也定义了每个对象的责任和协议。

## 抽象是控制复杂性的技术

推荐：[控制复杂性的方法](https://blankspace.blog.csdn.net/article/details/113634653)

抽象是控制复杂性的关键技术，它的目的在于隐蔽不需要的细节。

一个系统可以从多个不同层面抽象，抽象到何种层次合适由问题本身决定，需要具体问题具体分析。
值得指出的是，当处于某个抽象层次的时候，最好是对当前抽象层次之上和之下都有一定的了解。计算机科学家不可能在不理解程序运行平台体系系结构的情况下充分优化代码；器件工程师也不可能在不了解晶体管具体用途的情况下在设计晶体管的时候作出明智的选择。

# 抽象泄露

如果抽象机制无法隐藏复杂性，就会暴露出应该被隐藏的复杂性，即抽象泄漏。

推荐阅读：[The Law of Leaky Abstractions](https://www.joelonsoftware.com/2002/11/11/the-law-of-leaky-abstractions/)

在某种程度上，所有非平凡的抽象都是泄漏的。
（说明：平凡是数学上经常提到的概念，就是指最简单的情形，或者说是容易证明的、容易看到的。）

事实上，存在一个抽象泄漏定律，它意味着，例如，每当有人想出一个更新更便捷的代码生成工具，该工具应该使我们所有人更高效时，可能会听到很多人说：“先学习手动操作，然后再使用节省时间的新工具。”进行抽象的代码生成工具就像所有抽象一样，会泄漏，有效处理泄漏的唯一方法是了解该工具的抽象的工作方式以及抽象的内容。因此，抽象为我们节省了工作时间，但并没有节省我们学习的时间。

所有这一切都意味着，即使我们拥有越来越高的编程工具并具有越来越好的抽象性，矛盾的是，成为一名熟练的程序员也变得越来越困难。

导致抽象泄漏的问题应该被给出处理方案，应该从用户的视角去设计程序的抽象层面，不要有任何令用户失望的东西。
