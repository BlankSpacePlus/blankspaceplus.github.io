---
title: 软件版本和配置
date: 2022-03-06 01:46:52
summary: 本文介绍软件工程中的版本和配置。
mathjax: true
tags:
- 软件工程
categories:
- 软件工程
---

# 版本

大多数依赖管理工具允许指定依赖项的版本范围，而非一个固定的版本。开发者可以为多个模块所共享的依赖项选择一个公共版本。

以下是经典的版本范围：
- $[x,y]$：从版本$x$到版本$y$，包含版本$x$和版本$y$。
- $(x,y)$：从版本$x$到版本$y$，不包含版本$x$和版本$y$。
- $[x,y)$：从版本$x$到版本$y$，包含版本$x$，不包含版本$y$。
- $(x,y]$：从版本$x$到版本$y$，不包含版本$x$，包含版本$y$。
- $[x,)$：所有比版本$x$更高的版本，包含版本$x$。
- $(,x]$：所有比版本$x$更低的版本，包含版本$x$。
- $[x,y),(y,)$：从版本$x$到所有比版本$y$更高的版本，包含版本$x$，不包含版本$y$。

Maven指定依赖项的版本范围：
```xml
<dependencies>
    <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter-api</artifactId>
        <version>5.9.0</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter-engine</artifactId>
        <version>5.9.0</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.junit.jupiter</groupId>
        <artifactId>junit-jupiter-params</artifactId>
        <version>5.9.0</version>
        <scope>test</scope>
    </dependency>
</dependencies>
```

Gradle指定依赖项的版本范围：
```json
dependencies {
    testCompile 'junit:junit:4.11'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
}
```

# 配置

无论何时维护产品，都会产生老版本和新版本。

修改或扩展老版本后，发布的新版本称为修订版。
对于修订版的新老版本，不能简单粗暴地废弃所有老版本已解决多版本并存问题。

事实上，新版本的制品不见得比老版本正确，所以应该保留所有版本的制品。

每个制品的特定版本集是这个产品版本的**配置**。

维护的管理者必须建立一个**baseline**，它是产品中所有制品的配置（版本集）。
当需要寻找错误时，维护程序员把所需的制品复制到自己的个人工作台中，修改的个人版不会影响到其他开发者。

一旦决定修改哪个制品以修复错误，开发者要冻结要修改制品的当前版，其他人则不能修改被冻结的制品。修改并通过测试后，可以发布新版，原有版本仍然保留。其他人可以基于新版修改，以此类推……

企业实际应用时，除了紧急修复的情况，发版时间间隔都是有规定的，baseline也实际存在。
服务端的版本统一还算方便，客户端的版本很难统一。有时，为了保证某些功能客户端版本的变更能够全面推开，服务端会对旧版本客户端用户发出的请求返回错误信息toast提示（向服务端发出的请求包含了客户端版本信息），强制要求其升级版本以使用功能。

另外，维护产品时，必须进行**回归测试**。产品先前正确执行过的测试用例必须重新运行，以确保产品增加了新功能后没有破坏产品现有的功能。
