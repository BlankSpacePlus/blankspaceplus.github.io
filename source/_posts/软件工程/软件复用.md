---
title: 软件复用
date: 2021-03-12 10:08:29
summary: 本文浅析软件复用的三种粒度及其对应策略。
tags:
- 软件工程
categories:
- 软件工程
---

# 软件复用

UML将复用定义为：已有人工制品的使用。

> 记住，除了继承，还可以通过其他方式进行复用，包括代码拷贝。在建模中的最大错误之一就是为了获得复用而强迫使用不适当的泛化，这种做法通常会造成混乱。

软件复用的粒度及对应的复用策略：
- 类 ~ 工具包（类库）
- 构件 ~ 框架
- 解决方案 ~ 分析与设计模式

# 工具包复用

工具包强调在类一级进行代码复用。

在这种层次的复用中，程序员通过调用某些类库中的具体类来完成程序。
此程序的主题是程序员编写的，而不是复用的。

有两种工具包：
- 基础工具包：基础类由对象编程环境广泛提供，包括实现原始数据类型的类、结构化数据类型与集合。
- 体系结构工具包：体系结构类通常作为系统软件的一部分，如OS、DB、GUI软件。

# 框架复用

框架强调构件级的设计复用。

与工具包复用不同，一个框架提供程序的骨架，程序员通过编写框架需要调用的程序代码在框架骨架里完成程序，程序本身是定制的。

除了框架本身的具体类，框架提供了大量的抽象类用于程序员实现定制的程序。

```java
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.web.servlet.ServletComponentScan;

@SpringBootApplication
@ServletComponentScan
public class SpringbootApplication {

    public static void main(String[] args) {
        SpringApplication.run(SpringbootApplication.class, args);
    }

}
```

一个框架是可定制的应用软件。

虽然框架是一种极有吸引力的复用建议，但也有很多缺点。
框架所交付的通用的、最低公有分母解决方案可能并不能令人满意，甚至可能是过时的。如果如此，框架不但没有给采纳者带来优势，反而在追求新式解决方案时可能产生维护的负担。

# 模式复用

模式强调的是开发方法的复用，它们提供对象交互的思想和例子来表示好的开发实践，得到可理解和可扩展的解决方案。

模式可应用于开发生命周期的分析阶段、体系结构设计阶段或详细设计阶段，从而产生了分析模式、体系结构模式和设计模式（一般来说，设计模式包含体系结构模式）。

模式是被证实的解决方案，很多情况下都适用。这些情况已经被标识，并可以用于开发者寻找问题解决方案的线索。一个模式的任何已知的不利条件和副作用都应该被列出来以便开发者做出正确的决定。

虽然很多设计模式包含了样例代码，使得程序员可以复用，但模式复用很大程度上是概念性的。
设计模式的范围通常处于一个比类大但比构件小的范围内。
分析模式的范围则依赖于模式所应用的建模抽象的层次。

GoF提出的设计模式一共有23种，分为3大类：
- **创建型设计模式**：通过创建对象来解决设计问题。
    - **抽象工厂模式**：创建几个类家族的一个实例。
    - **建造者模式**：允许相同结构的过程创建不同的实现。
    - **工厂方法模式**：创建几个可能的衍生类的一个类型。
    - **原型模式**：要被克隆的一个类。
    - **单例模式**：限制一个类实例化只能是一个实例。
- **结构型设计模式**：通过确定实现实体间关系的简单方式来解决问题。
    - **适配器模式**：适配不同类的接口。
    - **桥接模式**：从实现中分离出抽象。
    - **组合模式**：相似类的合成类。
    - **装饰器模式**：允许给类动态地添加额外的特性。
    - **门面模式**：提供简化接口的单类。
    - **享元模式**：使用共享机制来有效地支持大量细粒度类。
    - **代理模式**：起到接口功能的类。
- **动作型设计模式**：通过确定对象间通用交互模式来解决设计问题。
    - **责任链模式**：通过类链来处理申请的方式。
    - **命令模式**：在类中封装一个行为。
    - **解释器模式**：应用特定语言元素的方式。
    - **迭代器模式**：频繁地访问集合元素。
    - **中介者模式**：为一组接口提供统一的接口。
    - **备忘录模式**：捕获并存储对象的内部状态。
    - **观察者模式**：允许在运行时观察对象的内部状态。
    - **状态模式**：允许在运行时部分改变对象的类型。
    - **策略模式**：允许在运行时动态选择算法。
    - **模板方法模式**：将算法的实现延迟到子类中。
    - **访问者模式**：不改变类的情况下给类添加新的操作。
