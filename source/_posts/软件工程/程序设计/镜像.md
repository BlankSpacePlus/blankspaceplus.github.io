---
title: 镜像
date: 2023-03-27 11:42:28
summary: 本文分享实际开发中常用到的镜像源的基本常识，介绍一些常见软件镜像源的配置方法。
tags:
- 程序设计
categories:
- 程序设计
---

# 镜像

镜像是指在不同的服务器上存储相同的数据和文件，使用户可以从离自己较近的服务器上获取所需内容。例如，清华大学镜像站点是指在清华大学内部或外部搭建的多个服务器，这些服务器都存储了相同的软件包、镜像、文档等内容，用户可以从离自己最近或带宽较大的服务器上下载所需内容，从而提高下载速度和用户体验。

镜像站点的建设可以带来多方面的好处：
- 加速下载：通过将数据和文件存储在多个服务器上，用户可以选择距离自己最近或带宽较大的服务器下载所需内容，从而提高下载速度。
- 节省带宽：如果一个服务器上的数据和文件被多个用户下载，会占用大量带宽，可能导致服务器负载过高。通过在多个服务器上存储相同的内容，可以分散下载流量，降低单个服务器的负载。
- 提高可用性：如果一个服务器故障或无法访问，用户可以选择其他镜像服务器下载所需内容，从而保证服务的可用性。

镜像站点通常需要经过定期同步和维护，以保证存储的数据和文件与原始服务器上的内容保持一致。同时，镜像站点还需要提供一些查询和管理工具，方便用户查找和下载所需内容。

在国内，清华大学、中科大、阿里云等都提供了镜像站点，用户可以从这些站点下载各种软件、镜像、文档等内容。镜像站点已经成为了用户获取软件和文件的重要渠道之一，为用户提供了更快、更稳定的下载服务。

# 镜像站点配置

## Ubuntu配置镜像源

在Ubuntu中配置镜像源可以通过修改`/etc/apt/sources.list`文件实现。推荐阅读：[ubuntu镜像源的配置](https://blog.csdn.net/liangzc1124/article/details/124580600)

## Docker配置镜像源

在Docker中配置镜像源可以通过修改`/etc/docker/daemon.json`文件实现（`vim /etc/docker/daemon.json`）。可以从以下镜像源选择一个添加到该文件中：
- 中国科学技术大学镜像
    ```json
    {
        "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"]
    }
    ```
- 网易镜像
    ```json
    {
        "registry-mirrors": ["http://hub-mirror.c.163.com"]
    }
    ```
- Docker中国区官方镜像
    ```json
    {
        "registry-mirrors": ["https://registry.docker-cn.com"]
    }
    ```

## npm配置镜像源

在 Node.js 中配置镜像源可以通过命令行参数或者环境变量实现。可以使用以下命令指定淘宝的镜像源：`npm config set registry https://registry.npm.taobao.org/`

## pip配置镜像源

在一次pip下载中，我们可以通过`-i`和`--trusted-host`配置此次的镜像源，例如`pip install Django==4.1.7 -i http://pypi.douban.com/simple --trusted-host pypi.douban.com`。

为了在每次下载中都能用到镜像，我们可以打开`C:\Users\<username>\AppData\Roaming\pip\pip.ini`(Windows)或`~/.pip/pip.conf`(Linux)文件，向文件中追加以下内容：
```java
[global]
index-url = http://pypi.douban.com/simple/
[install]
trusted-host = pypi.douban.com
```

常用的国内pip镜像源如下表所示：

| 机构名 | URL |
|:----:|:----:|
| 阿里云 | `http://mirrors.aliyun.com/pypi/simple/` |
| 豆瓣 | `http://pypi.douban.com/simple/` |
| 清华大学 | `https://pypi.tuna.tsinghua.edu.cn/simple/` |
| 中国科学技术大学 | `http://pypi.mirrors.ustc.edu.cn/simple/` |

## cargo配置镜像源

cargo配置镜像源，可以修改`config.toml`配置文件：
- 清华大学镜像
    ```python
    replace-with = 'tuna'
    
    [source.tuna]
    registry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"
    ```
- 上海交通大学镜像
    ```python
    replace-with = 'sjtu'
    
    [source.sjtu]
    registry = "https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index"
    ```
- 中国科学技术大学镜像
    ```python
    replace-with = 'ustc'
    
    [source.ustc]
    registry = "git://mirrors.ustc.edu.cn/crates.io-index"
    ```
- 阿里云镜像
    ```python
    replace-with = 'aliyun'
    
    [source.aliyun]
    registry = "https://code.aliyun.com/rustcc/crates.io-index"
    ```
