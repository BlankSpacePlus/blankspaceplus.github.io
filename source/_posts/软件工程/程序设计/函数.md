---
title: 函数
date: 2022-02-27 20:02:36
summary: 本文分享函数(方法)的相关内容，分别介绍了函数返回值、函数命名、函数参数。
tags:
- 程序设计
categories:
- 程序设计
---

# 函数

函数是指一段可以直接被另一段程序或代码引用的程序或代码，也叫做子程序、方法。

一个较大的程序一般应分为若干个程序块，每一个模块用来实现一个特定的功能。所有的高级语言中都有子程序这个概念，用子程序实现模块的功能。在C语言中，子程序是由一个主函数和若干个函数构成的。由主函数调用其他函数，其他函数也可以互相调用。同一个函数可以被一个或多个函数调用任意多次。

函数的定义：`返回值类型 函数名称(形式参数表列) {函数体语句 return 表达式;}`

函数调用：`函数名称(实际参数表列);`

# 函数返回值

弱类型语言不需要指定返回值类型，而Python这种强类型语言一样不需要指定返回值类型。

对于通常的强类型语言，函数返回值应该属于一种有效的类型，具体取决于编程语言的特点。当无返回值时，可用void作为返回值的“类型”，尽管void并不是一种类型。事实上void已经成为了一种通用的关键词。

# 函数命名

推荐阅读：[变量和常量](https://blankspace.blog.csdn.net/article/details/123163101)

函数命名的基本原则与变量类似：
1. 所有的函数名必须是一个词。
2. 函数名可以使用下划线，通常也可以使用连字符，但不能使用空格。
3. 函数名可以很长，事实上许多语言允许名字长度超过200个字符。只是，名字太会增加程序出错的机会。
4. 大多数语言允许数字作为变量名的一部分，但函数名不能以数字开头。
5. 函数命名分为驼峰式命名和下划线式命名。
6. 函数名应该要有实际意义且易于理解。

以 caculate perimeter (计算周长) 为例， 驼峰式命名的函数名为`calculatePerimeter`，下划线式命名的函数名为`calculate_perimeter`。

每种语言有自己约定俗成的命名习惯，例如Java通常采用驼峰式命名，而Python多采用下划线式命名。

# 函数参数

从一个程序模块向另一个程序模块进行数据传递指的是从前一个数据模块将数据导出，然后将数据导入后一个数据模块的过程。

数据流图展示了程序模块之间的关系，指明了数据在程序模块之间的导入和导出关系。

## 形参与实参

要想从一个模块向子模块传递数据的话，调用语句（调用模块）需要包含实参，而子程序（被调用子程序）头部需要包含形参。

调用语句中的实参数量和类型必须与被调用程序头部的形参数量和类型一一对应。实参与形参之间的数据传递完全依赖于实参列表和形参列表的位置关系。

## 值参数与引用参数

子程序中值参数值的变化不会影响到实际参数值的变化，但是子程序中引用参数值的变化会导致相应实参值一起变化。

值参数用于向子程序中导入数据。

引用参数用于从子程序中导出（或导入导出）数据。

## 可变参数

### Java可变参数方法

JDK1.5以后，Java支持定义形参个数可变的参数，从而为方法指定数量不确定的形参：

```java
public static void function(int var1, int... var2) {
    // TODO
}
```

我们知道，数组是变量的集合，这些变量有相同的类型，使用相同的名字，连续顺序存储，支持按索引访问。

连续的、同类型的一组变量集合，不就是数组吗？这个可变参数与数组有什么关系呢？

下面进行一个实验：

```java
public class Varargs {

    public static void function(int var1, int... var2) {
        System.out.println(var1);
        System.out.println(var2.getClass());
        int[] array = new int[] {1, 2, 3, 4};
        System.out.println(array.getClass());
    }

    public static void main(String[] args) {
        function(100, 1, 2, 3, 4);
    }

}
```

运行结果是：

```java
100
class [I
class [I
```

可见，传入的可变个数参数本质是一个数组参数的“语法糖”！

以上面的`function()`调用为例，如果传入四个可选参数1、2、3、4则调用语句是：`function(100, 1, 2, 3, 4);`，否则如果可选参数改成数组则需要先定义一个int类型数组`int[] var2 = new int[] {1, 2, 3, 4};`然后调用`function(100, var2);`。

### C可变参数函数

C语言也支持可变参数的函数。其语法规则是：

```c
int func_name(int arg1, ...);
```

其中，arg1参数表示可变参数的个数。

用法示例：
```c
#include <stdio.h>
#include <stdarg.h>

int sum(int argsNum, ...)
{
    va_list args;
    int result;
    va_start(args, argsNum);
    for (int i = 0; i < argsNum; i++)
    {
        result += va_arg(args, int);
    }
    va_end(args);
    return result;
}

int main()
{
   printf("%d\n", sum(3, 1, 2, 3));
   printf("%d\n", sum(4, 3, 99, -1, 0));
}
```

# 回调函数

回调函数是函数指针作为某个函数的参数，即被别的某个函数执行时通过函数指针参数调用的函数。

函数指针变量可以作为某个函数的参数来使用的，回调函数就是一个通过函数指针调用的函数。

## 函数指针

推荐阅读：[指针和引用](https://blankspace.blog.csdn.net/article/details/128910562)

函数指针是指向函数的指针变量。

函数指针可以像一般函数一样，用于调用函数、传递参数。

函数指针变量的声明语法：`typedef int (*fuctionn_pointer)(int, int);`
