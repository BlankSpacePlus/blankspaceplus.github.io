---
title: void
date: 2023-03-09 12:52:46
summary: 本文分享程序开发中常见的void的含义。
tags:
- 程序设计
categories:
- 程序设计
---

# void

void的英文词义包括“无效的”、“缺乏的”、“空的”等，在计算机科学中表示“无类型”。void比较普遍的出现在主流编程语言中，常用在程序编写中对定义函数的参数类型、返回值、函数中指针类型进行声明。

`void`类型指定没有可用的值。`void *`表示可以指向任何类型数据的指针。

# void的应用场景

void通常用于以下三种情况下：
- 函数返回为空：有些函数不返回值，或者可以说它们返回空。不返回值的函数的返回类型为空，例如`void exit (int status)`。
- 函数参数为空：有些函数不接受任何参数。不带参数的函数可以接受一个void，例如`int rand (void)`。
- 指针指向void：类型为`void *`的指针代表对象的地址，而不是类型。例如，内存分配函数`void *malloc (size_t size)`返回指向void的指针，可以转换为任何数据类型。

# void的应用经验

## 无返回值的函数应该用void

对于C语言，不写明函数返回值的情况，编译器默认返回值是int整数类型。尽管有的C编译器语法检查较为严格，不允许这样写，但明确“无返回值的函数应该用void”依然是有价值的。

## 无参数的函数应该使用void

对于C语言，不写明函数参数的情况，编译器可能允许调用时传递参数。尽管有的C编译器语法检查较为严格，不允许这样写，但明确“无参数的函数应该使用void”依然是有价值的。

## 不该定义void变量

void不算真正的类型，几乎只有“注释”和限制程序的作用。因此，定义一个void变量没有意义。

```c
void a;
```

上面的代码没有意义，还会遇到报错：<font color="red">illegal use of type 'void'</font>。

推荐阅读：[变量与类型](https://blankspace.blog.csdn.net/article/details/128863772)

## void指针类型转换

如果两个指针变量的类型相同，那么我们可以直接在二者间互相赋值。

如果两个指针变量指向不同的数据类型，则必须使用强制类型转换运算符把赋值运算符右边的指针类型转换为左边指针的类型。

`void *`较为特殊，任何类型的指针都可以直接赋值给`void *`变量，无需进行强制类型转换。但`void *`类型变量不能赋给诸如`int *`类型的变量。 

## void指针运算

C/C++的指针也可以执行某些运算，例如`++`、`+=1`。

C语言的ANSI标准和GNU标准对此方面的限制程度也不同。
ANSI标准对此较为严格，要求进行算术操作的指针必须是确定知道其指向数据类型大小的，不允许`void *`直接运算。
GNU标准对此较为宽松，指定`void *`的算术操作与`char *`一致，可以使用`void *`直接运算。

为了保证系统的可移植性，开发者在编码时应该尽可能迎合严格的标准。

例如：
```c
void * void_ptr;
(char *)void_ptr++;
```

## void指针类型参数

如果函数的参数可以是任意类型指针，那么应声明其参数为`void *`。

典型的代表是`memcpy`函数和`memset`函数：
`void * memcpy (void *dest, const void *src, size_tlen);`
`void * memset ( void * buffer, int c, size_t num );`

如此，任何类型的指针都可以传入`memcpy`函数和`memset`函数中。如此，更真实地体现了内存操作函数的意义。因为内存操作函数操作的对象仅仅是一片内存，而不论这片内存是什么类型。

## javascript:void(0)

void是JavaScript中非常重要的关键词，`javascript:void(0)`指定要计算一个表达式但是不返回值，通常表示一个死链接。
