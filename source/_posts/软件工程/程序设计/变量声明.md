---
title: 变量声明
date: 2023-03-10 00:10:08
summary: 本文讨论不同编程语言的变量声明和定义机制，以Java、C、C++、C#、Rust、Scala、Python、JavaScript、Swift等编程语言为案例。
tags:
- 程序设计
categories:
- 程序设计
---

# 动态语言和静态语言

静态语言是在编译时确定变量的数据类型，运行期间不可以改变其结构，即运行前可确定类型的语言。多数静态类型语言要求在使用变量之前必须声明数据类型。 
典型的静态语言：C、C++、C#、Java。

动态语言是在运行时确定数据类型与结构的语言。变量使用之前不需要类型声明，通常变量的类型是被赋值的那个值的类型。 
典型的动态语言：Python、JavaScript、PHP、SQL(非编程语言)、Shell。

# 强类型语言和弱类型语言

强类型语言和弱类型语言这两个术语并没有非常明确的定义，但主要用以描述编程语言对于混入不同数据类型的值进行运算时的处理方式。

强类型的语言遇到函数引数类型和实际调用类型不匹配的情况经常会直接出错或者编译失败。而弱类型的语言常常会实行隐式转换，可能产生难以意料的结果。

# 变量

变量是一种使用方便的占位符，用于引用计算机内存地址。

变量声明意思是告诉编译器在内存中的哪个位置上为变量创建多大的存储空间。

推荐阅读：[变量和常量](https://blankspace.blog.csdn.net/article/details/123163101)

推荐阅读：[变量与类型](https://blankspace.blog.csdn.net/article/details/128863772)

C中有两种类型的表达式：
- 左值：是指向内存位置的表达式，可以出现在赋值号的左边或右边。变量是左值，因此可以出现在赋值号的左边。
- 右值：是存储在内存中某些地址的数值，也是不能对其进行赋值的表达式，只能出现在赋值号的右边，但不能出现在赋值号的左边。数值型的字面值是右值，因此不能被赋值，不能出现在赋值号的左边。

# 静态语言的变量声明

静态语言声明变量的时候，基本都遵循的语法规则是 ：`<VarType> <varName>;`。变量的声明和赋初值可以放在一起，也可以分离。

## Java的变量声明

Java属于静态语言的范畴，因此遵循`<VarType> <varName>;`的语法规则。

Java常量需要在变量类型定义前加上`final`，即`final <varType> varName;`。

值得一提的是，Java10引入`var`代指局部变量类型，变量可以声明为`var <varName> = <initialValue>;`。var语法看起来是Java向动态语言的妥协，但var只会在Java编码期和编译期有效，当类被编译为.class文件时，var就会变成确定的变量类型。

## C/C++的变量声明

C和C++都属于静态语言的范畴，因此遵循`<VarType> <varName>;`的语法规则。

## C#的变量声明

C#属于静态语言的范畴，因此遵循`<VarType> <varName>;`的语法规则。

## Rust的变量声明

Rust属于静态语言的范畴，但语法规则与上述C、C++、C#、Java有所不同。

Rust是强类型语言，但具有自动判断变量类型的能力。Rust变量必须用`let`定义，例如`let a = 1;`。`let`定义的Rust变量是不可变的变量，不能被再次赋值。如果想要再次赋值变量，变量应该被定义为`let mut`的，例如`let mut a = 1;`。Rust用`const`定义常量，`const`修饰的常量与`let`修饰的不可变变量是不同的。

Rust定义的变量可以直接明确类型，例如`let a: i32 = 456;`

看起来，Rust变量定义过程与下面介绍的Python相似，其实非也。Rust的`let mut`相当于Java的`var`。Rust只是赋予了编译器在编译阶段自动判断变量类型的能力，运行前所有变量的类型都已经确定且不可变。

## Scala的变量声明

Scala属于静态语言的范畴，但语法规则与上述C、C++、C#、Java有所不同。

Scala用`var`修饰变量，用`val`修饰常量，二者声明时都可以不立刻赋初值，但必须声明类型。Scala变量声明语法规则是`var <varName>: <VarType> [=  <initialValue>]`，Scala常量声明语法规则是`val <varName>: <VarType> [=  <initialValue>]`。

# 动态语言的变量定义

动态语言不需要声明变量，直接定义即可。

## Python的变量定义

Python作为一种动态语言，直接定义变量即可，例如`a=1`。

Python作为一种强类型语言，也支持在定义变量的时候声明其类型，`a: int = 1`。

## JavaScript的变量定义

JavaScript作为一种动态语言，基于`var`直接定义变量即可，例如`var a=1`。

JavaScript中，函数及变量的定义都将被提升到函数的最顶部。因此，JavaScript变量可以先使用再定义。

JavaScript中，变量定义时如果不使用var关键字，那么它就是一个全局变量，即便它在函数内定义。

ES2015(ES6)新增加了两个重要的JavaScript关键字`let`和`const`。
`let`声明的变量只在`let`所在的代码块内有效。
`const`声明一个只读变量，声明之后不允许改变，声明的同时必须完成初始化。

## Swift的变量定义

Swift作为一种动态语言，基于`var`直接定义变量即可，例如`var a=1`。Swift通过`let`定义常量，例如`let b = 2`。
