---
title: 基本数学运算
date: 2019-11-08 12:15:27
summary: 本文分享编程语言提供的基本数学运算，以Java、Python、C/C++为例。
tags:
- 程序设计
categories:
- 程序设计
---

# Java

## java.lang.Math

`java.lang.Math`类属于`java.lang`包，不需要import。
当然，为了方便用其中大量的静态方法和类变量，也可以用静态导入：`import static java.lang.Math`。
		
Math类包含执行基本数字运算的方法，如初等指数、对数、平方根和三角函数。

与类StricMath的一些数值方法不同，Math类的所有等价函数的实现都没有定义为返回位相同结果的位。这种松弛允许在不需要严格再现性的情况下更好地执行。
StricMath类包含执行基本数值运算的方法，如初等指数函数、对数函数、平方根函数和三角函数。

为了帮助确保Java程序的可移植性，这个包中的一些数值函数的定义要求它们产生与某些已发布的算法相同的结果。这些算法可以从著名的网络库netlib获得，作为包“自由分配的数学库”fdlibm。这些算法以C语言编写，然后被理解为遵循Java浮点运算规则的所有浮点运算来执行。

Java Math库是针对fdlbm版本5.3定义的。如果fdlibm为函数（如acos）提供多个定义，请使用“IEEE 754核心函数”版本（位于名称以字母e开头的文件中）。需要fdlibm语义的方法有sin、cos、tan、asin、acos、atan、exp、log、log10、cbrt、atan2、pow、sinh、cosh、tanh、hypot、expm1和log1p。

该平台使用带符号二的整数补码算法和int和long原语类型。开发人员应该选择原语类型，以确保算术运算一致地产生正确的结果，这在某些情况下意味着运算不会超出计算值的范围。最佳实践是选择基元类型和算法以避免溢出。在大小为int或long且需要检测溢出错误的情况下，当结果溢出时，addExact, subtractExact, multiplyExact, 和toIntExact方法会引发算术异常(ArithmeticException)。对于其他算术运算，如除、绝对值、递增、递减和负溢出，只会出现特定的最小值或最大值，应根据最小值或最大值进行检查。

在默认情况下，许多Math方法只是简单地称之为StrictMath中的等价方法来实现它们。鼓励代码生成器使用特定于平台的本机库或微处理器指令（如果可用），以提供更高性能的Math方法实现。如此高的性能实现仍然必须符合数学规范。

实施规范的质量关系到两个方面，返回结果的准确性和方法的单调性。浮点Math方法的准确度是以ulp为单位进行测量的，最后是以单位进行测量的。对于Agiven浮点格式，特定实数值的ulp是包含该数值的两个浮点值之间的距离。当将一个方法作为一个整体而不是某个特定的参数来讨论它的准确性时，引用的ULP的数量对于任何参数的最坏情况都是错误的。如果一个方法的错误总是小于0.5 ulps，那么该方法总是返回最接近精确结果的浮点数字；这样的方法是正确的。正确的四舍五入法通常是最好的浮点数近似法；然而，任何形式的浮点数法都不能正确地四舍五入。相反，对于Math类，对于某些方法，允许使用较大的1或2 ulps的错误范围。通常情况下，如果有1ulp的误差限制，当精确结果是一个可表示的数字时，应将精确结果作为计算结果返回；否则，括号中的两个浮点值中的任何一个都可能被返回。对于规模较大的精确结果，括号的一个端点可能是无限的。除个别论据的准确性外，保持不同论据的方法之间的适当关系也很重要。因此，误差大于0.5ulp的大多数方法都要求是半单调的：无论何时数学函数是递减的，浮点近似也是，同样，无论何时数学函数是非递增的，浮点近似也是。并非所有精度为1的近似值都能自动满足单调性要求。

该平台使用带符号二的整数补码算法，并带有int和long基元类型。开发人员应选择原语类型以确保算术运算一致地产生正确的结果，这在某些情况下意味着运算不会超出计算值的范围。最佳做法是选择原语类型和算法以避免溢出。当大小为int或long且需要检测溢出错误时，addexact、subtractexact、multiplyexact和tointexact方法会在结果溢出时引发算术异常。对于除、绝对值、增量为1、减量为1和负数等其他算术操作，溢出只在特定的最小值或最大值，应根据最小值或最大值进行检查。

我们对比版本可见：Math类是1.0版本就有的；StrictMath类是1.3版本才有的。

`java.lang.Math`类，它有两个静态的属性(类变量)：E和PI。调用的时候往往是表示为`Math.E`和`Math.PI`。

### Method API

`java.lang.Math`类的静态方法：
1. abs(...a):作用是返回参数的绝对值
参数可以是double、float、int、long四种，返回对应的类型

2. acos(double a):作用是返回参数的反余弦函数的值
参数是double型，返回浮点数从0.0到π，π也是以浮点数呈现
输入数据限定-1到1，否则会返回NaN(非数)

3. addExact(...x, ...y):作用是返回两参数的和（求和）
参数是int+int或者long+long,返回对应类型的数值
一旦求和后结果发生溢出会抛出异常

4. asin(double a):作用是返回参数的反正弦函数的值
参数是double型，返回浮点数从-π/2到π/2，π也是以浮点数呈现
输入数据限定-1到1，否则会返回NaN(非数)

5. atan​(double a):作用是返回参数的反正切函数的值
参数是double型，返回浮点数从-π/2到π/2，π也是以浮点数呈现
POSITIVE_INFINITY和NEGATIVE_INFINITY不能用做参数的

6. atan2​(double y,double x):作用是返回从直角坐标（x，y）转换为极坐标（r，θ）的θ角
返回double型

7. cbrt​(double a):作用是返回参数的立方根
返回double型

8. ceil​(double a):作用是返回大于或等于参数且数值上等于整数的最小（最接近负无穷大）的浮点数
返回double型
解释的通俗点就是向上取整后转成数学上相等的double型

9. copySign​(...magnitude, ...sign):返回第一个参数，它会带上第二个浮点参数符号（+/-）
参数可以是double、float两种，返回对应的类型
返回double型

10. cos​(double a):作用是返回参数的余弦函数的值
返回double型

11. cosh​(double x):作用是返回参数的双曲余弦函数的值
返回double型

12. decrementExact​(...a):作用是返回参数-1的值
参数可以是int、long两种，返回对应的类型
一旦-1后结果发生溢出会抛出异常

13. exp​(double a):作用是返回e^a，以e为底的指数函数
返回double型

14. expm1​(double x):作用是返回(e^a)-1，以e为底的指数函数值-1
返回double型

15. floor​(double a):作用是返回小于或等于参数且数值上等于整数的最大（最接近正无穷大）的浮点数
返回double型

16. floorDiv​(...x, ...y):作用是返回小于或等于代数运算所得商的最大（最接近正无穷大）值
参数可以是int+int、long+int、long+long三种
int+int返回int，其余两个返回long

17. floorMod​(...x, ...y):作用是返回小于或等于代数运算所得模的最大（最接近正无穷大）值
参数可以是int+int、long+int、long+long三种
int+int返回int，其余两个返回long

18. fma​(...a, ...b, ...c):作用是返回前两个数相加后与第三个数相乘得到的值
参数可以是double+double+double、float+float+float两种，返回对应的类型

19. getExponent​(...d/f):作用是返回无偏指数
参数可以是double d、float f两种
返回int
无偏指数的内容参考：[IEEE-754](https://www.jianshu.com/p/8ee02e9bb57d)

20. hypot​(double x, double y):作用是返回没有中间溢出或下溢的sqrt（x^2 + y^2）
返回double型

21. IEEEremainder​(double f1, double f2):作用是根据IEEE754标准的规定，对两个参数计算剩余操作
返回double型

22. incrementExact​(...a):作用是返回参数+1
参数可以是int、long两种，返回对应的类型
一旦+1后结果发生溢出会抛出异常

23. log​(double a):作用是返回参数的自然对数（以e为底a的对数）
返回double型

24. log10​(double a):作用是返回参数的常用对数（以10为底a的对数）
返回double型

25. log1p​(double x):作用是返回参数+1后取的自然对数（以e为底a+1的对数）
返回double型

26. max​(...a, ...b):作用是返回两个数里最大的（相对更大的）一个数
参数可以是double+double、float+float、int+int、long+long四种，返回对应的类型

27. min​(...a, ...b):作用是返回两个数里最小的（相对更小的）一个数
参数可以是double+double、float+float、int+int、long+long四种，返回对应的类型

28. multiplyExact​(...x, ...y):作用是返回两个数的乘积
参数可以是int+int、long+int、long+long三种
int+int返回int，其余两个返回long
一旦做乘积后结果发生溢出会抛出异常

29. multiplyFull​(int x, int y):作用是返回参数的精确的数学乘积
参数为int，返回long

30. multiplyHigh​(long x,long y):作用是作为一个long返回两个64位因子的128位积中最重要的64位
返回long

31. negateExact​(...a):作用是返回参数的相反数
参数可以是int、long两种,返回对应的类型
取相反数后如果溢出会抛出异常

32. nextAfter​(...start, ...direction):作用是返回第二个参数方向上与第一个参数相邻的浮点数
 参数可以是double+double、float+double两种
 返回值随第一个参数走

33. nextDown​(...d/f):作用是返回在负无穷大方向上与d/f相邻的浮点值
参数可以是double d、float f两种，返回对应的类型

34. nextUp​(...d/f):作用是返回在正无穷大方向上与d/f相邻的浮点值
参数可以是double d、float f两种，返回对应的类型
和上面的33.nextDown​(...)方法类似，不做赘述

35. pow​(double a, double b):作用是返回第一个参数的第二个参数次幂（a^b）
返回double型

36. random():作用是返回一个介于0.0和1.0之间的（伪随机）正数
伪随机数的知识可以参考[百度百科](https://baike.baidu.com/item/%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0/104358?fr=aladdin)
返回double型

37. rint​(double a):作用是返回在数学上等于与参数值最接近且是整数的double
返回double型
解释的通俗一点就是四舍五入后取数学上相等的double型浮点

38. round​(...a):作用是返回参数四舍五入后的整数值
参数可以是double、float两种
double参数返回long，float参数返回int

39. scalb​(...d/f, nt scaleFactor):作用是返回d ×2^scaleFactor 
参数可以是double d、float f两种，返回对应的类型
相当于浮点×double的感觉

40. signum​(...d/f):作用是返回符号函数的值
参数可以是double d 、float f两种，返回对应的类型
啰嗦点说就是返回参数的signum函数：如果参数为零，则返回零；如果参数大于零，则返回1.0；如果参数小于零，则返回-1.0

41. sin​(double a):作用是返回参数的正弦函数的值
返回double型

42. sinh​(double x):作用是返回参数的双曲正弦函数的值
返回double型

43. sqrt​(double a):作用是返回四舍五入后的参数的平方根值
返回double型

44. subtractExact​(...x, ...y):作用是返回两参数的差
参数可以是int+int、long+long两种，返回对应的类型
结果如果超出相应范围则抛出异常

45. tan​(double a):作用是返回参数的正切函数的值
返回double型

46. tanh​(double x):作用是返回参数双曲正切函数的值
返回double型

47. toDegrees​(double angrad):作用是将以弧度度量的角度转换为以度度量的近似等效角度
返回double型

48. toIntExact​(long value):作用是将long转换成对应的int值输出
返回int
如果超出int值的范围则抛出异常

49. toRadians​(double angdeg):作用是将以度为单位的角度转换为以弧度为单位的近似等效角度
返回double型

50. ulp​(...d/f):作用是返回参数的ULP大小
参数可以是double d、float f两种,返回对应的类型
ULP我也不是很懂，查了查有这么个解释： 一个单位的最后的地方(浮点数)
我用的其中两组测试数据是这样的： 

### 参考代码

```java
public class MathTest{
	public static void main(String[] args){
		/*--------下面是三角运算--------*/
		System.out.println("**--------下面是三角运算--------**");
		//将弧度转化为角度
		System.out.println("Math.toDegrees(1.57):" + Math.toDegrees(1.57));
		//将角度转化为弧度
		System.out.println("Math.toRadians(90):" + Math.toRadians(90));
		//计算反余弦，返回的角度在0.0到π之间
		System.out.println("Math.acos(1.2):" + Math.acos(1.2));
		//计算反正弦，返回的角度在-π/2到π/2之间
		System.out.println("Math.asin(0.8):" + Math.asin(0.8));
		//计算反正切，返回的角度在-π/2到π/2之间
		System.out.println("Math.atan(2.3):" + Math.atan(2.3));
		//计算三角余弦
		System.out.println("Math.cos(1.57):" + Math.cos(1.57));
		//计算双曲余弦
		System.out.println("Math.cosh(1.2):" + Math.cosh(1.2));
		//计算三角正弦
		System.out.println("Math.sin(1.57):" + Math.sin(1.57));
		//计算双曲正弦
		System.out.println("Math.sinh(1.2):" + Math.sinh(1.2));
		//计算三角正切
		System.out.println("Math.tan(0.8):" + Math.tan(0.8));
		//计算双曲正切
		System.out.println("Math.tanh(2.1):" + Math.tanh(2.1));
		//将直角坐标(x,y)转换成极坐标(r,thet)
		System.out.println("Math.atan2(0.1, 0.2):" + Math.atan2(0.1, 0.2));

		/*--------下面是取整运算--------*/
		System.out.println("**--------下面是取整运算--------**");
		//取整，返回小于目标数的最大整数
		System.out.println("Math.floor(-1.2):" + Math.floor(-1.2));
		//取整，返回大于目标数的最小整数
		System.out.println("Math.ceil(1.2):" + Math.ceil(1.2));
		//四舍五入取整
		System.out.println("Math.round(2.3):" + Math.round(2.3));


		/*--------下面是乘方、开方、指数运算--------*/
		System.out.println("**--------下面是乘方、开方、指数运算--------**");
		//计算平方根
		System.out.println("Math.sqrt(2.3):" + Math.sqrt(2.3));
		//计算立方根
		System.out.println("Math.cbrt(9):" + Math.cbrt(9));
		//返回欧拉数e的n次幂
		System.out.println("Math.exp(2):" + Math.exp(2));
		//返回sqrt(x2+y2)，没有中间溢出或者下溢
		System.out.println("Math.hypot(4, 4):" + Math.hypot(4, 4));
		//按照IEEE754标准的规定，对两个参数进行余数运算
		System.out.println("Math.IEEEremainder(5, 2):" + Math.IEEEremainder(5, 2));
		//计算乘方
		System.out.println("Math.pow(3, 2):" + Math.pow(3, 2));
		//计算自然对数
		System.out.println("Math.log(12):" + Math.log(12));
		//计算底数为10的对数
		System.out.println("Math.log10(9):" + Math.log10(9));
		//返回参数与1之和的自然对数
		System.out.println("Math.log1p(9):" + Math.log1p(9));

		/*--------下面是符号相关的运算--------*/
		System.out.println("**--------下面是符号相关的运算--------**");
		//计算绝对值
		System.out.println("Math.abs(-4.5):" + Math.abs(-4.5));
		//符号赋值，返回带有第二个浮点数符号的第一个浮点参数
		System.out.println("Math.copySign(1.2, -1.0):" + Math.copySign(1.2, -1.0));
		//符号函数，如果参数为0，则返回0；如果参数大于0，则返回1；如果参数小于0，则返回-1
		System.out.println("Math.signum(2.3):" + Math.signum(2.3));

		/*--------下面是符号相关的运算--------*/
		System.out.println("**--------下面是符号相关的运算--------**");
		//找出最大值
		System.out.println("Math.max(2.3, 4.5):" + Math.max(2.3, 4.5));
		//计算最小值
		System.out.println("Math.min(1.2, 3.4):" + Math.min(1.2, 3.4));
		//返回第一个参数和第二个之间的与第一个参数相邻的浮点数
		System.out.println("Math.nextAfter(1.2, 1.0):" + Math.nextAfter(1.2, 1.0));
		//返回比目标数略大的浮点数
		System.out.println("Math.nextUp(1.2):" + Math.nextUp(1.2));
		//返回一个伪随机数，该值大于0.0且小于1.0
		System.out.println("Math.random():" + Math.random());
	}
}
```

# Python

## math

### Method API

| 函数 | 说明 |
|--|--|
| math.e | 自然常数e |
| math.pi | 圆周率π |
| math.degrees(x) | 弧度转角度 |
| math.radians(x) | 角度转弧度 |
| math.exp(x) | 返回e的x次幂 |
| math.expm1(x) | 返回e的x次幂-1 |
| math.log(x[, base]) | 返回x的basee为底的对数，base默认为e |
| math.log10(x) | 返回x的以10为底的对数 |
| math.log1p(x) | 返回(1+x)的自然对数 |
| math.pow(x, y) | 返回x的y次幂 |
| math.sqrt(x) | 返回x的平方根 |
| math.ceil(x) | 返回不小于x的整数 |
| math.floor(x) | 返回不大于x的整数 |
| math.trunc(x) | 返回x的整数部分 |
| math.modf(x) | 返回x的小数和整数 |
| math.fabs(x) | 返回x的绝对值 |
| math.fmod(x, y) | 返回x%y（取余） |
| math.fsum([x, y, ...]) | 返回无损精度的和 |
| math.factorial(x) | 返回x的阶乘 |
| math.isinf(x) | 若x为无穷大，返回True；否则返回False |
| math.isnan(x) | 若x不是数字，返回True；否则返回False |
| math.hypot(x, y) | 返回x,y为直角边的直角三角形的斜边长 |
| math.copysign(x, y) | 若y<0，返回-1乘以x的绝对值；否则返回x的绝对值 |
| math.frexp(x) | 返回m和i，满足m乘以2的i次幂 |
| math.ldexp(m, i) | 返回m乘以2的i次幂 |
| math.sin(x) | 返回x的（角度的）三角正弦值 |
| math.asin(x) | 返回x的反三角正弦值 |
| math.cos(x) | 返回x的（角度的）三角余弦值 |
| math.acos(x) | 返回x的反三角余弦值 |
| math.tan(x) | 返回x的（角度的）三角正切值 |
| math.atan(x) | 返回x的反三角正切值 |
| math.atan2(x, y) | 返回x/y的反三角正切值 |
| math.sinh(x) | 返回x的双曲正弦函数 |
| math.asinh(x) | 返回x的反双曲正弦函数 |
| math.cosh(x) | 返回x的双曲余弦函数 |
| math.acosh(x) | 返回x的反双曲余弦函数 |
| math.tanh(x) | 返回x的双曲正切函数 |
| math.atanh(x) | 返回x的反双曲正切函数 |
| math.erf(x) | 返回x的误差函数 |
| math.erfc(x) | 返回x的余误差函数 |
| math.gamma(x) | 返回x的伽马函数 |
| math.lgamma(x) | 返回x的绝对值的自然对数的伽马函数 |

## complex

### 参考代码

调用的运算代码：
```python
z1 = 8 + 9j
z2 = 3 + 4j

# 实部
print(z1.real)

# 虚部
print(z2.imag)

# 加法
print(z1+z2)

# 减法
print(z1*z2)

# 共轭
print(z1.conjugate())
```

运算结果：

```
8.0
4.0
(11+13j)
(-12+59j)
(8-9j)
12.041594578792296
```

# C/C++

## math.h

```c
#include <math.h>
```

## cmath

C++的`cmath`头文件等价于C语言中的`math.h`头文件。

```cpp
#include <cmath>
```
