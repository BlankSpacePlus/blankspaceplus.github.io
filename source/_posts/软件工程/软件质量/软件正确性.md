---
title: 软件正确性
date: 2022-03-13 01:02:24
summary: 本文分享程序正确性的相关内容。
mathjax: true
tags:
- 软件质量
- 软件工程
categories:
- 软件工程
---

# 程序正确性

程序的正确性证明是展示产品正确（满足规格说明）的一种数学技术。

许多人认为：正确性证明不能看成标准的软件工程技术。
理由是：程序员缺乏充分的数学培训；证明代价高实用性不高；证明可能是困难的。

不能如上所述一棍子打死。
就程序员的数学功底而言，取决于个人积累，而非培训。
就实用价值而言，对于严格要求正确性的情况下，正确性证明很重要。
定理证明的繁冗可以借助一部分定理证明器工具来减轻。

正确性证明的实际困难是：
- 难以认定定理证明器的准确性。
- 难以找出输入和输出规格说明，特别是找出循环不变式或出于其他逻辑状态的同等物。
- 难以保证规格说明本身准确无误。

以上困难并不能说明正确性证明对软件工程是没有意义的。反而，因为软件工程的目标是提供高质量软件，所以正确性证明有时是重要的软件工程技术。

如果根据成本-效益分析法，证明软件正确的成本低于产品出现故障的代价，那么应当证明。
即便应当证明，仅仅是正确性证明也是不够的，因为正确性证明应该看作是综合验证产品正确性的整套技术中的一个重要组成部分。

即便一个完全正规的证明没有证明产品正确，软件质量仍可通过非形式化的证明得到明显提高，[软件测试](https://blog.csdn.net/weixin_43896318/category_9747018.html)对此可以提供帮助。

# 程序正确性证明

下面以插入排序的正确性证明为例子，抛砖引玉。

## 伪代码

**Insertion-Sort(A)**

```java
for j = 2 to length[A]
    do key ← A[j]
        // insert A[j] to sorted sequence A[1, ..., j-1]
        i ← j-1
        while i > 0 and A[i] > key
            do A[i+1] ← A[i]
                i ← i-1
        A[i+1] ← key
```

循环不变量：
在每次循环的开始，子数组$A[1, ..., j-1]$包含原来数组中$A[1, ..., j-1]$但已经是有序的。

## 证明

1. 初始化：初始化，令$j=2$，$A[1, ..., j-1] = A[1, 1] = A[1]$，已经有序。
2. 维护：每一层循环维护循环不变量。
3. 终止：$j=n+1$，<br>$\therefore A[1, ..., j-1] = A[1, n]$是有序的。
4. 得证
