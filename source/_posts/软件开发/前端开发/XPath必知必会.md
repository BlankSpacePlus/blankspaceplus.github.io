---
title: XPath必知必会
date: 2023-08-31 15:05:40
summary: 本文分享XPath的相关内容。
tags:
- XML
- XPath
categories:
- 开发技术
---

# XPath

XPath使用路径表达式在XML文档中进行导航。

![](../../../images/软件开发/前端开发/XPath必知必会/1.gif)

# XPath节点

XPath中存在七种节点：
- 元素
- 属性
- 文本
- 命名空间
- 处理指令
- 注释
- 文档节点（根节点）

XPath基本值是无父或无子的XPath节点。

XPath节点间的关系包括：
- 父节点
- 子节点
- 同胞节点
- 先辈节点
- 后代节点

XPath使用路径表达式在XML文档中选取节点。节点是通过沿着路径或者step来选取的。

| XPath路径表达式 | 路径表达式含义 |
|:----:|:----:|
| `node_name` | 选取此节点及其所有后代节点 |
| `/` | 从根节点选取子节点 |
| `//` | 从匹配选择的当前节点选择文档中的后代节点，而不考虑它们的位置 |
| `.` | 选取当前节点 |
| `..` | 选取当前节点的父节点 |
| `@` | 选取属性 |
| `[]` | 选取符合谓词条件的节点 |
| `|` | 选取多个节点 |
| `*` | 选取所有元素节点 |
| `@*` | 选取所有属性节点 |

示例：

| XPath路径表达式 | 路径表达式含义 |
|:----:|:----:|
| `a` | 选取a元素的所有子节点 |
| `/a` | 选取根元素a(绝对路径) |
| `a/b` | 选取属于a的所有b子元素 |
| `//b` | 选取所有b子元素，而不管它们在文档中的位置 |
| `a//b` | 选择属于a元素的后代的所有b元素，而不管它们位于a之下的什么位置 |
| `//@c` | 选取名为c的所有属性 |
| `/a/b[1]` | 选取属于a的第一个b子元素 |
| `/a/b[last()]` | 选取属于a的最后一个b子元素 |
| `/a/b[last()-1]` | 选取属于a子的倒数第二个b子元素 |
| `/a/b[position()<3]` | 选取最前面的两个属于a元素的b子元素 |
| `//a[@c]` | 选取所有含有c属性的a元素 |
| `//a[@c='str']` | 选取所有c属性值为str的a元素 |
| `/a/b[d>3.14]` | 选取a元素的所有d属性值大于3.14的b元素 |
| `/a/b[d>3.14]//e` | 选取a元素的所有d属性值大于3.14的b元素的所有e元素 |
| `/a/*` | 选取a元素的所有子元素 |
| `//*` | 选取文档中的所有元素 |
| `//a[@*]` | 选取所有带有属性的a元素 |
| `//b/c | //b/d` | 选取b元素的所有c和d元素 |
| `//c | //c` | 选取文档中的所有c和d元素 |
| `/a/b/c | //d` | 选取属于a元素的b元素的所有c元素，以及文档中所有的d元素 |

# XPath轴

| XPath轴 | 轴的实际含义 |
|:----:|:----:|
| `ancestor` | 选取当前节点的所有先辈（父、祖父等） |
| `ancestor-or-self` | 选取当前节点的所有先辈（父、祖父等）以及当前节点本身 |
| `attribute` | 选取当前节点的所有属性 |
| `child` | 选取当前节点的所有子元素 |
| `descendant` | 选取当前节点的所有后代元素（子、孙等） |
| `descendant-or-self` | 选取当前节点的所有后代元素（子、孙等）以及当前节点本身 |
| `following` | 选取文档中当前节点的结束标签之后的所有节点 |
| `following-sibling` | 选取当前节点之后的所有兄弟节点 |
| `namespace` | 选取当前节点的所有命名空间节点 |
| `parent` | 选取当前节点的父节点 |
| `preceding` | 选取文档中当前节点的开始标签之前的所有节点 |
| `preceding-sibling` | 选取当前节点之前的所有同级节点 |
| `self` | 选取当前节点 |

# XPath运算符

XPath运算符包括：
- `+`
- `-`
- `*`
- `div`
- `mod`
- `=`
- `!=`
- `<`
- `<=`
- `>`
- `>=`
- `or`：谓词逻辑的或
- `and`：谓词逻辑的与
- `|`：两个节点集的并集
