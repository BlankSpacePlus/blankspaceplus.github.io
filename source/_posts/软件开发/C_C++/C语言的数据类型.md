---
title: C语言的数据类型
date: 2019-10-22 20:39:26
summary: 本文本文介绍C语言的数据类型。
tags:
- C语言
categories:
- 开发技术
---

# 1 基本数据类型

大致分为下面三种：
 - 整数
 - 浮点数
 - 字符

| 类型 | 大小(位) | 最小值 | 最大值 |
|:----:|:----:|:----:|:----:|
| char | $8$ | $-2^{-7}$ | $2^7-1$ |
| unsigned char | $8$ | $0$ | $2^{8}-1$ |
| short | $16$ | $-2^{15}$ | $2^{15}-1$ |
| unsigned short | $16$ | $0$ | $2^{16}-1$ |
| long | $32$ | $-2^{31}$ | $2^{31}-1$ |
| unsigned long | $32$ | $0$ | $2^{32}-1$ |
| long long | $64$ | $-2^{63}$ | $2^{63}-1$ |
| unsigned long long | $64$ | $0$ | $2^{64}-1$ |
| int | 与机器无关 |  |  |
| unsigned int | 与机器无关 |  |  |
| float | $32$ | $±2^{-126}$ | $±2^{127}$ |
| double | $64$ | $±2^{-1023}$ | $±2^{1022}$ |

# 2 其他数据类型

其他数据类型包括：
 - 指针
 - 数组
 - 字符串
 - 结构

## 2.1 指针

指针是一个变量的地址。

指针呢，是C语言中一个非常核心的概念，这里难以讲的明白，大家可以看这位大佬的文章，讲的很清楚：
[深入理解C语言指针](https://blog.csdn.net/ZackSock/article/details/101594794)

变量声明中，变量名前的星号(*)表明了这是一个指针变量，而且类型是该声明类型。
*运算符间接引用一个指针，返回存储在指针所包含的内存地址中的值。
&运算符此处名为“地址”，它生成的引用变量的地址。

函数传参通过传入指针变量可以实现传引用而非仅仅是传值。

一个指向地址0的指针成为空指针，表示该指针并不实际指向有意义的数据。在程序中写为NULL。

## 2.2 数组

数组时一组存储在内存中连续地址的类似变量。元素序号0~length-1。

C语言中数组变量是指向第一个元素（index=0）的指针。

C语言中不能超出数组范围进行访问是程序员的责任。C语言没有边界检查，因此一个越界进行访问的程序可以编译好，但是运行时会逾越到内存的其他部分。

声明数组可以用{}或者定义长度后在代码中逐位单独初始化。for循环可以批量分配和读取数组元素。

数组长度必须是整数常量，从而让编译器分配适量的内存空间。

但是当数组作为参数传递的时候，不需要定义长度，因为只需要知道数组的初始地址。

通过接收一个数组作为输入参数，函数实际上可以通过改变数组本身返回多个值。

数组可以是多维的，但是一般至多使用到二维数组。下面的两种都是可以接受的：

```c
void print2dArray(int[5][5]){}

void print2dArray(int[][5]){}
```

可见第一个维度可以在传参的时候不定义。

由于数组由指向初始元素的指针表示，所以C语言不能用=或者==对数组进行运算符复制或者比较数组。必须使用一个循环来复制或者比较数组元素，一次一个。

## 2.3 字符串

字符串是用来存储一块有界但是可变长度的文本的字符数组。每个字符是一个ASCII码字节，代表字母、数字、符号。数组大小确定字符串的最大长度，但是字符串的是实际长度可以更短（感觉像一个顺序表但不清楚具体的情况）。C语言中通过寻找字符串末尾的空终止符('\0'，ASCII码0x00)来确定字符串长度。

定义：

```c
char greetings[10] = "Hello!";
```
不同于基本变量，C语言的字符串不能用=赋值给另一个字符串。
C语言的字符串中的每一个元素必须从源字符串单独复制到目的字符串。
上面的两行适用于任何C语言中的数组。

## 2.4 结构

C语言中，结构是用于存储各种类型数据的集合。

结构声明的一般形式：

```c
struct name {
    type1 element1;
    type2 element2;
    // ...
};
```
struct是一个关键字，表明是一个结构。
name是结构标签名称。
element1和element2是结构成员，type1和type2是结构成员的类型。
一个结构可以有任意类型的成员。

与内置的C语言数据类型一样，我们可以创建结构数组和结构指针。

```c
struct contact {
    char name[30];
    int phone;
    float height;
};

struct contact c1;

strcpy(c1.name, "Sam");
c1.phone = 22222;
c1.height = 1.80;
```

```c
struct contact classlist[200];
classlist[0].phone = 11111;
```

通常我们使用指向结构的指针。
C语言提供了成员访问运算符->来间接引用指向结构指针并访问结构的成员。

```c
struct contact *cptr;
cptr = &classlist[42];
//下面的语句等价于 (*cptr).height = 1.90;
cptr->height=1.90;
```

可以通过值或者引用将结构作为函数输入或输出传递。
按值传递需要编译器将整个结构复制到内存中以便函数访问。
对于大结构，这可能需要大量的内存和时间。
通过引用传递包括传递一个结构指针，这更有效。
函数还可以修改被指向的结构而不必返回两一个结构。

注意：
C语言中，typedef语句可以定义自己的数据类型名称。

```c
typedef struct contact{
    char name[30];
    int phone;
    //in meters(按米算)
    float height;
} contact;

contact c1;
```

typedef可以用于创建新的类型，该类型占据与基本类型相同数量的存储空间。

```c
typedef unsigned char byte;
typedef char bool;
#define TRUE 1
#define FALSE 0

byte pos = 0x45;
bool loveC = TRUE;
```

这样可读性更强。
