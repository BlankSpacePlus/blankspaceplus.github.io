---
title: Java继承
date: 2023-04-08 23:47:49
summary: 本文研究Java继承相关的语法知识与面试题，涉及extends、implements、this、super、final、abstract、sealed、permits、private、static等关键词。
tags:
- Java
categories:
- Java
---

# extends与implements

作为一门面向对象的语言，Java支持继承。继承可以帮助开发人员重用代码并减少重复编写的工作。但是，在使用继承时需要注意一些问题，如避免使用过多的继承层次、避免使用父类的私有属性和方法等。

在Java中，extends和implements都与类之间的继承关系有关。

extends是用于类之间的继承，子类继承父类的属性和方法，并且可以添加新的属性和方法扩展类的行为，还可以通过重写方法来修改继承的行为。使用extends关键字声明一个类继承自另一个类，例如：

```java
class ChildClass extends ParentClass {
    // 子类的属性和方法
}
```

使用extends，子类可以继承父类的非私有属性和方法，包括构造方法、静态属性和方法等。当一个类使用extends关键字继承另一个类时，子类会自动拥有父类的所有非私有属性和方法，可以通过使用super关键字来访问这些父类属性和方法。

implements是用于类和接口之间的实现关系，类实现接口时需要实现接口中定义的所有方法。使用implements关键字声明一个类实现一个或多个接口，例如：

```java
class MyClass implements MyInterface {
    // 实现接口中的所有方法
}
```

在Java 8及以上版本中，接口中可以有默认方法和静态方法的实现，这些方法可以被直接调用，不需要实现类去实现。

在Java中，一个类只能继承一个直接父类，也就是单继承。但是，一个类可以实现多个接口，这样就可以达到类似多继承的效果。如果要实现多个接口，需要使用implements关键字。

# 继承的可见性问题

子类可以访问父类中所有非private的方法和属性，但是无法访问父类中的private方法和属性。如果子类与父类在不同的包中，那么子类只能访问父类中被protected和public修饰的方法和属性。

# 多继承问题

Java中不支持多继承，一个类只能继承一个直接父类。这是因为多继承会引起命名冲突和代码复杂性，所以Java语言设计者为了简化语言和减少错误，禁止了多继承的语法。但是，Java中可以通过接口（interface）来实现类似多继承的功能。类可以实现多个接口，从而具备多个接口中定义的行为。

Java只是从语法层面上不直接支持多继承，实际上可以通过implements多个接口实现变相的多继承。

# 继承链问题

Java中的类只支持单继承，也就是一个子类只能有一个直接父类。但是，一个类可以间接继承自多个类，形成继承链。需要注意的是，继承链过长会影响程序的性能和可维护性，因此应尽量避免出现过于复杂的继承关系。

# this与super

在Java中，this和super都是关键字，用于访问当前对象和父类对象。

this关键字指向当前对象，可以用于访问当前对象的实例变量和方法。在方法中，如果出现局部变量与实例变量同名的情况，使用this关键字可以区分两者。另外，在构造方法中，可以使用this关键字调用其他构造方法，实现构造方法的重载。

super关键字指向父类对象，可以用于访问父类中定义的实例变量和方法。当子类和父类中有同名的实例变量或方法时，使用super关键字可以访问父类中的对应成员。此外，在子类中可以使用super关键字调用父类中的构造方法，以实现子类构造方法中对父类的初始化。
在子类构造方法中必须先调用父类的构造方法，否则编译器会自动加上默认的super()调用。而且，如果父类中有多个构造方法，必须选定一个进行调用。

在实际编程中，this和super常常被用来解决命名冲突或者继承关系中的问题，提高程序的可读性和可维护性。同时，合理使用this和super也能够提高代码的灵活性和扩展性。

# final与abstract

final和abstract是Java中两种特殊的关键词，它们和继承有关。

final表示“最终的、不可变的”，用于修饰类、方法和变量。final修饰的类不能被继承，final修饰的方法不能被重写，final修饰的变量表示常量，不能被再次赋值。final关键字的使用可以使代码更加安全、稳定和可读。

abstract表示“抽象的、不完整的”，用于修饰类和方法。abstract修饰的类是抽象类，不能直接实例化，只能用作父类被继承。abstract修饰的方法是抽象方法，只有声明而没有实现，必须在子类中被重写实现。抽象类和抽象方法的使用可以使代码更加灵活和可扩展。

final和abstract的作用不同，但它们都和继承密切相关。final保证了继承的安全性和稳定性，abstract保证了继承的灵活性和可扩展性。同时，final和abstract还可以一起使用，比如final修饰的变量可以在抽象类中使用，表示常量。

# sealed与permits

sealed和permits是Java 15中引入的两个关键字，用于实现sealed class（封闭类）的概念。

```java
public sealed class Shape permits Circle, Rectangle, Triangle {
    // ...
}
```

sealed用于修饰类和接口，表示该类或接口是封闭的，只能在特定的派生类中被继承。上面的代码中，Shape类是封闭的，只有Circle、Rectangle和Triangle这三个类能够继承Shape类。如果有其他类尝试继承Shape类，编译器会报错。

permits则用于指定哪些类能够继承一个封闭类。例如，上面的代码中的`permits Circle, Rectangle, Triangle`指定了Shape类只能被Circle、Rectangle和Triangle这三个类继承。

使用sealed和permits可以更加严格地控制继承关系，防止类的继承关系出现意外情况，从而提高代码的健壮性和可维护性。

# private方法的继承问题

私有方法不能被重写，但可以被重载。因为私有方法是子类无法访问的，所以子类无法重写它，但是父类可以在自己内部对其进行重载。

# static方法的继承问题

静态方法不能被重载，也不能被重写。因为静态方法是类级别的，不属于实例对象，子类无法重写它。在子类中可以通过类名调用父类的静态方法，也可以通过子类名调用子类的静态方法。如果在子类中定义了一个与父类同名的静态方法，那么这个方法不会重写或重载父类的方法，而是属于子类自己的静态方法，子类与父类将拥有各自独立的静态方法。
