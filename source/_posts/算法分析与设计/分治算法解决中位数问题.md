---
title: 分治算法解决中位数问题
date: 2021-02-15 21:23:29
summary: 本文基于分治算法解决中位数问题，用Java编程实现。
mathjax: true
tags:
- 算法
categories:
- 算法分析与设计
---

# 问题描述

设$X[0:n-1]$和$Y[0:n–1]$为两个数组，每个数组中含有$n$个已排好序的数。找出$X$和$Y$的$2n$个数的中位数。  

# 编程任务

利用分治策略试设计一个$O(\log{n})$时间的算法求出这$2n$个数的中位数。

# 数据输入

由文件**input.txt**提供输入数据。文件的第$1$行中有$1$个正整数$n(n≤200)$，表示每个数组有$n$个数。接下来的两行分别是$X$，$Y$数组的元素。

# 结果输出

程序运行结束时，将计算出的中位数输出到文件**output.txt**中。

# 求解思路

比较两个序列的中位数大小，如果两个数相等，则该数为整个$2n$个数据的中位数，否则通过比较，分别减少两个序列的查找范围，确定查找的起止位置，继续查找。

# 自定义输入文件示例

```txt
3
5 15 18
3 14 21
```

# 编程实现

```java
import java.io.*;

/**
 * 获取两有序等长数组的中位数
 */
public class Solution1 {

    private static int search(int[] a, int[] b, int la, int ra, int lb, int rb) {
        int ma = (la + ra) / 2;
        int mb = (lb + rb + 1) / 2;
        if (la == ra) {
            return (lb == rb) ? Math.min(a[la], b[lb]) : Math.min(a[la], b[rb]);
        } else if (lb == rb) {
            return Math.min(b[lb], a[ra]);
        }
        if (la == ra-1 && lb == rb-1) {
            //第一个序列求中位数方法不变，第二个序列变为与第一序列相同的方法求得中位数
            mb = (lb + rb) / 2;
        }
        return a[ma] == b[mb] ? a[ma] : (a[ma] > b[mb] ? search(a, b, la, ma ,mb, rb) : search(a, b, ma, ra, lb, mb));
    }

    public static void main(String[] args) {
        try (BufferedReader reader = new BufferedReader(new FileReader("src/dc/input1.txt"));
             BufferedWriter writer = new BufferedWriter(new FileWriter("src/dc/output1.txt"))){
            int num = Integer.parseInt(reader.readLine());
            String[] nums1 = reader.readLine().split("\\s+"), nums2 = reader.readLine().split("\\s+");
            int[] a = new int[num], b = new int[num];
            for (int i = 0; i < num; i++) {
                a[i] = Integer.parseInt(nums1[i]);
                b[i] = Integer.parseInt(nums2[i]);
            }
            int result = search(a, b, 0, num-1, 0, num-1);
            System.out.println(result);
            writer.write(Integer.toString(result));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

}
```

# 输出结果

```txt
14
```
