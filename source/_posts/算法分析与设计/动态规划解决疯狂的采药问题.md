---
title: 动态规划解决疯狂的采药问题
date: 2020-03-13 12:09:49
summary: 本文基于动态规划解决疯狂的采药问题（洛谷P1616题），用Java编程实现。
mathjax: true
tags:
- 算法
- Java
categories:
- 算法分析与设计
---

# 题目描述

LiYuxiang 是个天资聪颖的孩子，他的梦想是成为世界上最伟大的医师。为此，他想拜附近最有威望的医师为师。医师为了判断他的资质，给他出了一个难题。医师把他带到一个到处都是草药的山洞里对他说：“孩子，这个山洞里有一些不同种类的草药，采每一种都需要一些时间，每一种也有它自身的价值。我会给你一段时间，在这段时间里，你可以采到一些草药。如果你是一个聪明的孩子，你应该可以让采到的草药的总价值最大。”

如果你是 LiYuxiang，你能完成这个任务吗？

此题和原题的不同点：

$1$. 每种草药可以无限制地疯狂采摘。

$2$. 药的种类眼花缭乱，采药时间好长好长啊！师傅等得菊花都谢了！

# 输入格式

输入第一行有两个整数，分别代表总共能够用来采药的时间 $t$ 和代表山洞里的草药的数目 $m$。

第 $2$ 到第 $(m + 1)$ 行，每行两个整数，第 $(i + 1)$ 行的整数 $a_i, b_i$ 分别表示采摘第 $i$ 种草药的时间和该草药的价值。

# 输出格式

输出一行，这一行只包含一个整数，表示在规定的时间内，可以采到的草药的最大总价值。

# 样例 #1

## 样例输入 #1

```
70 3
71 100
69 1
1 2
```

## 样例输出 #1

```
140
```

# 提示

## 数据规模与约定

- 对于 $30\%$ 的数据，保证 $m \le 10^3$ 。
- 对于 $100\%$ 的数据，保证 $1 \leq m \le 10^4$，$1 \leq t \leq 10^7$，且 $1 \leq m \times t \leq 10^7$，$1 \leq a_i, b_i \leq 10^4$。

# 算法分析

设采第$i$种草药所需的时间为$t[i]$，价值为$p[i]$ 。
又设花费的采药时间最多为$j$，$f[i][j]$表示此时从前往后到第$i$种草药(可能有不采的)所能采到草药的最大总价值。

第$i$种草药有两种情况：采与不采。
若不采这种草药，则时间花费没有增多 ，经过的草药种数增加$1$， 采到草药价格不变 ，所以$f[i][j]=f[i-1][j]$。
若采这种草药，则 时间花费增加了$t[i]$， 种数增加$1$， 采到草药价格增加了$p[i]$，所以$f[i][j]=f[i-1][j-t[i]]+p[i]$。
要使$f[i][j]$尽可能大 ，即有$f[i][j]=max(f[i-1][j],f[i-1][j-t[i]]+p[i])$

# Java实现代码

```java
import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int time = scanner.nextInt(), num = scanner.nextInt();
        int[] f = new int[time+1];
        int[] cost = new int[num], value = new int[num];
        for (int i = 0; i < num; i++) {
            cost[i] = scanner.nextInt();
            value[i] = scanner.nextInt();
        }
        scanner.close();
        for (int i = 0; i < num; i++) {
            for (int j = cost[i]; j <= time; j++) {
                if (j >= cost[i]) {
                    f[j] = Math.max(f[j], f[j-cost[i]]+value[i]);
                }
            }
        }
        System.out.println(f[time]);
    }
}
```

# 代码提交

[洛谷 P1616 疯狂的采药](https://www.luogu.com.cn/problem/P1616)
